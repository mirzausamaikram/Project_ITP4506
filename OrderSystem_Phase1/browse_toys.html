<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Browse Toys ‚Äì Smile and Sunshine Toys</title>
  <link rel="stylesheet" href="css/main.css"/>
  <link rel="stylesheet" href="css/animations.css"/>
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      background: linear-gradient(135deg, #fff 0%, #f0f8f8 100%);
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
      font-family: "Segoe UI", Arial, Helvetica, sans-serif;
      padding-top: 65px;
    }
    .snowflake {
      position: fixed;
      top: -10px;
      color: rgba(255, 255, 255, 0.8);
      font-size: 1.5em;
      animation: snowfall linear infinite;
      pointer-events: none;
      z-index: 0;
    }
    @keyframes snowfall {
      0% { transform: translateY(0) rotate(0deg); opacity: 1; }
      100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
    }
    .navbar {
      background: linear-gradient(135deg, #2c2c2c 0%, #1a1a1a 100%);
      padding: 12px 0;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      width: 100%;
      z-index: 1000;
      margin-bottom: 0;
    }
    .navbar .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .navbar-brand {
      color: red;
      font-size: 1.4rem;
      font-weight: bold;
      text-decoration: none;
    }
    .navbar-nav {
      display: flex;
      gap: 25px;
      align-items: center;
    }
    .nav-item {
      color: red;
      text-decoration: none;
      transition: all 0.3s ease;
      font-size: 0.95rem;
      font-weight: 500;
      padding: 8px 14px;
      border-radius: 6px;
    }
    .nav-item:hover {
      color: #fff;
      background: #d32f2f;
      transform: translateY(-2px);
    }
    .page-header {
      background: linear-gradient(135deg, #d32f2f 0%, #b71c1c 100%);
      color: white;
      padding: 30px 25px;
      border-radius: 12px;
      margin: 0 0 30px 0;
      text-align: center;
      box-shadow: 0 6px 20px rgba(211, 47, 47, 0.3);
      animation: fadeIn 0.8s ease;
    }
    .page-header h1 {
      margin: 0 0 8px 0;
      font-size: 2.2rem;
      font-weight: 700;
    }
    .page-header p {
      margin: 0;
      opacity: 0.95;
      font-size: 1.05rem;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .card {
      position: relative;
      z-index: 1;
      background: white;
      border-radius: 12px;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      max-width: 1100px !important;
      margin: 0 auto !important;
    }
    .toy-category-section {
      background: white;
      padding: 25px;
      border-radius: 12px;
      margin-bottom: 25px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
      border: 2px solid #f0f0f0;
    }
    .toy-category-section h3 {
      color: #d32f2f;
      margin: 0 0 18px 0;
      font-size: 1.35rem;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .category-items {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
      gap: 14px;
      margin-bottom: 0;
    }
    .category-item {
      background: linear-gradient(135deg, #f9f9f9 0%, #fff 100%);
      padding: 16px 12px;
      border-radius: 10px;
      text-align: center;
      border: 2px solid #e8e8e8;
      cursor: pointer;
      transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    }
    .category-item:hover {
      border-color: #d32f2f;
      transform: translateY(-8px);
      box-shadow: 0 12px 24px rgba(211, 47, 47, 0.25);
      background: linear-gradient(135deg, #fff 0%, #fff5f5 100%);
    }
    .category-item-emoji {
      font-size: 2.5rem;
      display: block;
      margin-bottom: 10px;
      transition: transform 0.3s ease;
    }
    .category-item:hover .category-item-emoji {
      transform: scale(1.15) rotate(5deg);
    }
    .category-item-name {
      font-weight: 700;
      color: #333;
      font-size: 0.9rem;
      line-height: 1.4;
    }
    .form-group {
      margin-bottom: 18px;
    }
    .form-group label {
      display: block;
      font-weight: 600;
      color: #333;
      margin-bottom: 8px;
      font-size: 0.95rem;
    }
    input[type="text"],
    input[type="email"],
    input[type="password"],
    select {
      width: 100%;
      padding: 12px 14px;
      border: 2px solid #ddd;
      border-radius: 8px;
      font-size: 0.95rem;
      transition: all 0.3s ease;
      background: #fafafa;
    }
    input:focus,
    select:focus {
      border-color: #d32f2f;
      background: white;
      box-shadow: 0 0 0 4px rgba(211, 47, 47, 0.1);
      outline: none;
    }
    .btn {
      padding: 12px 20px;
      border: none;
      border-radius: 8px;
      background: #d32f2f;
      color: white;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
      font-size: 0.95rem;
    }
    .btn:hover {
      background: #b71c1c;
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(211, 47, 47, 0.3);
    }
    .toy-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-top: 25px;
      padding-top: 20px;
      border-top: 2px solid #f0f0f0;
    }
    .toy-card {
      background: white;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
      transition: all 0.35s ease;
      border: 2px solid #f0f0f0;
      position: relative;
      display: flex;
      flex-direction: column;
    }
    .toy-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 12px 28px rgba(211, 47, 47, 0.2);
      border-color: #d32f2f;
    }
    .toy-card img {
      width: 100%;
      height: 180px;
      object-fit: cover;
    }
    .wishlist-heart {
      position: absolute;
      top: 10px;
      right: 10px;
      font-size: 2rem;
      cursor: pointer;
      transition: all 0.3s ease;
      filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
      z-index: 5;
      display: inline-block;
      line-height: 1;
      background: white;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .wishlist-heart:hover {
      transform: scale(1.15);
      background: #fff5f5;
    }
    .wishlist-heart.added {
      animation: heartBeat 0.5s ease;
    }
    @keyframes heartBeat {
      0%, 100% { transform: scale(1); }
      25% { transform: scale(1.3); }
      50% { transform: scale(1.15); }
      75% { transform: scale(1.25); }
    }
    .toy-card h3 {
      padding: 14px 14px 6px;
      margin: 0;
      color: #333;
      font-size: 1rem;
      font-weight: 700;
      line-height: 1.3;
      min-height: 30px;
      flex-grow: 0;
    }
    .toy-card p {
      padding: 0 14px;
      margin: 4px 0;
      color: #666;
      font-size: 0.85rem;
      line-height: 1.4;
    }
    .toy-card p:first-of-type {
      color: #d32f2f;
      font-weight: 700;
      font-size: 1.1rem;
      padding-top: 6px;
      margin: 0;
    }
    .toy-card p:nth-of-type(2) {
      flex-grow: 1;
      padding-bottom: 12px;
      margin-bottom: 10px;
    }
    .qty {
      width: calc(100% - 28px) !important;
      margin: 10px 14px;
      padding: 8px 10px !important;
    }
    .toy-card button {
      width: calc(100% - 28px);
      margin: 10px 14px 14px;
      padding: 10px 14px;
      margin-top: auto;
    }
    .search-section {
      margin-bottom: 25px;
      margin-top: 20px;
      padding: 20px;
      background: linear-gradient(135deg, #f9f9f9 0%, #fff 100%);
      border-radius: 10px;
      border: 2px solid #e8e8e8;
    }
    .search-buttons {
      display: flex;
      gap: 12px;
      margin-top: 12px;
    }
    .search-buttons button {
      flex: 1;
      padding: 10px 14px;
    }
    #searchResult {
      padding: 12px;
      margin-top: 12px;
      border-radius: 6px;
      background: #f0f0f0;
      color: #666;
      font-weight: 500;
    }
    a {
      color: #d32f2f;
      text-decoration: none;
      font-weight: 600;
      transition: all 0.3s ease;
    }
    a:hover {
      color: #b71c1c;
      text-decoration: underline;
    }
    @media (max-width: 768px) {
      .navbar-nav {
        gap: 15px;
        font-size: 0.85rem;
      }
      .page-header h1 {
        font-size: 1.6rem;
      }
      .category-items {
        grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
        gap: 10px;
      }
      .toy-grid {
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      }
      .search-buttons {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <!-- Falling snowflakes -->
  <script>
    function createSnowflakes() {
      for(let i = 0; i < 25; i++) {
        const snowflake = document.createElement('div');
        snowflake.className = 'snowflake';
        snowflake.textContent = '‚ùÑ';
        snowflake.style.left = Math.random() * window.innerWidth + 'px';
        snowflake.style.animationDuration = (Math.random() * 10 + 10) + 's';
        snowflake.style.animationDelay = Math.random() * 5 + 's';
        document.body.appendChild(snowflake);
      }
    }
    createSnowflakes();
  </script>

  <nav class="navbar">
    <div class="container">
      <a href="javascript:redirectDashboard()" class="navbar-brand">üéÑ Smile & Sunshine Toys</a>
      <div class="navbar-nav">
        <a href="browse_toys.html" class="nav-item">Browse Toys</a>
        <a href="wishlist.html" class="nav-item">My Wish-list</a>
        <a href="track_order.html" class="nav-item">Track Order</a>
        <a href="account.html" class="nav-item">Update Profile</a>
        <a href="quotation_form.html" class="nav-item">Custom Toys</a>
        <a href="#" onclick="logout(); return false;" class="nav-item">Logout</a>
      </div>
    </div>
  </nav>

  <div class="card fade-in" style="max-width:1000px; margin: 60px auto 0; padding: 0;">
    <div class="page-header">
      <h1>üéÅ Browse Our Toy Collection</h1>
      <p>Find the perfect Christmas gifts from our festive selection!</p>
    </div>

    <div style="padding: 30px;">
      <!-- Search & Filter Section -->
      <div class="search-section">
        <div class="form-group">
          <label>üîç Search Toys</label>
          <input 
            type="text" 
            id="searchInput" 
            placeholder="Search by toy name, category, or price..."
          >
        </div>
        <div class="search-buttons">
          <button class="btn" onclick="filterToys()">
            üîé Search
          </button>
          <button class="btn" onclick="resetSearch()" style="background: #999;">
            ‚úï Clear
          </button>
        </div>
        <div id="searchResult"></div>
      </div>

      <h3 style="color: #d32f2f; margin: 25px 0 20px 0; font-size: 1.35rem; font-weight: 700;">‚≠ê Our Toy Collection</h3>
      <div id="toyGrid" class="toy-grid">
        <div class="toy-card" data-toy="Building Blocks" data-price="22.00">
          <span class="wishlist-heart" onclick="toggleWishlist(event)">ü§ç</span>
          <div style="width: 100%; height: 180px; background: linear-gradient(135deg, #a8e6cf 0%, #56ab91 100%); display: flex; align-items: center; justify-content: center; font-size: 3rem;">üß©</div>
          <h3>Building Blocks</h3>
          <p>HK$ 22.00</p>
          <p>Colorful blocks for creative building fun</p>
          <input type="number" value="1" min="1" class="qty">
          <button class="btn" onclick="addToWishlist(event)">Add to Wish-list</button>
        </div>
        <div class="toy-card" data-toy="Space Toys" data-price="28.00">
          <span class="wishlist-heart" onclick="toggleWishlist(event)">ü§ç</span>
          <div style="width: 100%; height: 180px; background: linear-gradient(135deg, #ffd3a5 0%, #fd6585 100%); display: flex; align-items: center; justify-content: center; font-size: 3rem;">üöÄ</div>
          <h3>Space Toys</h3>
          <p>HK$ 28.00</p>
          <p>Rockets and space exploration sets</p>
          <input type="number" value="1" min="1" class="qty">
          <button class="btn" onclick="addToWishlist(event)">Add to Wish-list</button>
        </div>
        <div class="toy-card" data-toy="Gaming Sets" data-price="35.00">
          <span class="wishlist-heart" onclick="toggleWishlist(event)">ü§ç</span>
          <div style="width: 100%; height: 180px; background: linear-gradient(135deg, #6c5ce7 0%, #a29bfe 100%); display: flex; align-items: center; justify-content: center; font-size: 3rem;">üéÆ</div>
          <h3>Gaming Sets</h3>
          <p>HK$ 35.00</p>
          <p>Interactive gaming toys for all ages</p>
          <input type="number" value="1" min="1" class="qty">
          <button class="btn" onclick="addToWishlist(event)">Add to Wish-list</button>
        </div>
        <div class="toy-card" data-toy="Art Kits" data-price="18.00">
          <span class="wishlist-heart" onclick="toggleWishlist(event)">ü§ç</span>
          <div style="width: 100%; height: 180px; background: linear-gradient(135deg, #f8b195 0%, #f67676 100%); display: flex; align-items: center; justify-content: center; font-size: 3rem;">üé®</div>
          <h3>Art Kits</h3>
          <p>HK$ 18.00</p>
          <p>Creative art supplies and painting sets</p>
          <input type="number" value="1" min="1" class="qty">
          <button class="btn" onclick="addToWishlist(event)">Add to Wish-list</button>
        </div>
        <div class="toy-card" data-toy="Train Sets" data-price="45.00">
          <span class="wishlist-heart" onclick="toggleWishlist(event)">ü§ç</span>
          <div style="width: 100%; height: 180px; background: linear-gradient(135deg, #ffb347 0%, #ff9999 100%); display: flex; align-items: center; justify-content: center; font-size: 3rem;">üöÇ</div>
          <h3>Train Sets</h3>
          <p>HK$ 45.00</p>
          <p>Miniature train sets with tracks</p>
          <input type="number" value="1" min="1" class="qty">
          <button class="btn" onclick="addToWishlist(event)">Add to Wish-list</button>
        </div>
        <div class="toy-card" data-toy="Plushies" data-price="16.00">
          <span class="wishlist-heart" onclick="toggleWishlist(event)">ü§ç</span>
          <div style="width: 100%; height: 180px; background: linear-gradient(135deg, #c7ceea 0%, #b5a7d6 100%); display: flex; align-items: center; justify-content: center; font-size: 3rem;">üß∏</div>
          <h3>Plushies</h3>
          <p>HK$ 16.00</p>
          <p>Soft and cuddly stuffed animals</p>
          <input type="number" value="1" min="1" class="qty">
          <button class="btn" onclick="addToWishlist(event)">Add to Wish-list</button>
        </div>
      </div>
      <p style="text-align:center;margin-top:30px; padding-bottom: 20px;">
        <a href="customer_dashboard.html" class="back-btn"><span class="back-btn-arrow">‚Üê</span> Back to Dashboard</a>
      </p>
    </div>
  </div>

  <script src="js/browse.js"></script>
  <script src="../../js/animations.js"></script>
  <script>
    // Load wishlist on page load
    function loadWishlistHearts() {
      const wishlist = JSON.parse(localStorage.getItem('smile_sunshine_wishlist') || '[]');
      const toyCards = document.querySelectorAll('.toy-card');
      
      toyCards.forEach(card => {
        const toyName = card.getAttribute('data-toy');
        const heart = card.querySelector('.wishlist-heart');
        
        if (wishlist.some(item => item.name === toyName)) {
          heart.textContent = '‚ù§Ô∏è';
          heart.classList.add('added');
        } else {
          heart.textContent = 'ü§ç';
          heart.classList.remove('added');
        }
      });
    }

    // Toggle wishlist heart
    function toggleWishlist(event) {
      event.preventDefault();
      event.stopPropagation();
      
      const card = event.target.closest('.toy-card');
      const toyName = card.getAttribute('data-toy');
      const price = card.getAttribute('data-price');
      const heart = card.querySelector('.wishlist-heart');
      
      const wishlist = JSON.parse(localStorage.getItem('smile_sunshine_wishlist') || '[]');
      const itemIndex = wishlist.findIndex(item => item.name === toyName);
      
      if (itemIndex > -1) {
        // Remove from wishlist
        wishlist.splice(itemIndex, 1);
        heart.textContent = 'ü§ç';
        heart.classList.remove('added');
      } else {
        // Add to wishlist
        wishlist.push({ name: toyName, price: parseFloat(price) });
        heart.textContent = '‚ù§Ô∏è';
        heart.classList.add('added');
      }
      
      localStorage.setItem('smile_sunshine_wishlist', JSON.stringify(wishlist));
    }

    // Add to wishlist via button
    function addToWishlist(event) {
      event.preventDefault();
      
      const card = event.target.closest('.toy-card');
      const toyName = card.getAttribute('data-toy');
      const price = card.getAttribute('data-price');
      const heart = card.querySelector('.wishlist-heart');
      
      const wishlist = JSON.parse(localStorage.getItem('smile_sunshine_wishlist') || '[]');
      
      // Check if already in wishlist
      if (!wishlist.some(item => item.name === toyName)) {
        wishlist.push({ name: toyName, price: parseFloat(price) });
        localStorage.setItem('smile_sunshine_wishlist', JSON.stringify(wishlist));
        
        // Animate heart
        heart.textContent = '‚ù§Ô∏è';
        heart.classList.add('added');
        
        // Show feedback
        const btn = event.target;
        const originalText = btn.textContent;
        btn.textContent = '‚úì Added!';
        btn.style.background = '#4ecdc4';
        
        setTimeout(() => {
          btn.textContent = originalText;
          btn.style.background = '#d32f2f';
        }, 2000);
      } else {
        alert('This toy is already in your wishlist! üíù');
      }
    }

    // Initialize hearts on page load
    document.addEventListener('DOMContentLoaded', loadWishlistHearts);

    function redirectDashboard() {
      const user = JSON.parse(sessionStorage.getItem('user'));
      if (!user) {
        location.href = '../login.html';
        return;
      }
      if (user.role === 'sales') {
        location.href = '../QuotationSystem_Phase1/sales_dashboard.html';
      } else {
        location.href = 'customer_dashboard.html';
      }
    }

    function logout() {
      sessionStorage.removeItem('user');
      location.href = '../login.html';
    }
  </script>
</body>
</html>